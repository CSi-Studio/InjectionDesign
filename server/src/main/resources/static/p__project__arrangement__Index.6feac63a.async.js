"use strict";(self.webpackChunkInjection_Design=self.webpackChunkInjection_Design||[]).push([[268],{92354:function(Mn,nt,u){u.r(nt),u.d(nt,{default:function(){return Pr}});var mt=u(15009),C=u.n(mt),vt=u(97857),B=u.n(vt),ht=u(99289),X=u.n(ht),pt=u(5574),v=u.n(pt),gt=u(65360),ce=u(20550),me=u(48689),V=u(10328),s=u(67294),G=u(27802),E=u(19011),L=u(67115),e=u(85893),_e=new L.Z,g={id:function(t,a){return(0,e.jsx)(E.VaQ,{initialValue:t,readonly:a,width:"md",name:"id",label:"ID"})},sampleNo:function(t,a){return(0,e.jsx)(E.VaQ,{initialValue:t,readonly:a,rules:[{required:!0,pattern:/^.{1,50}$/,message:"1-50 characters are appropriate"}],width:"md",name:"sampleNo",label:(0,e.jsx)(V.FormattedMessage,{id:"sample.no"}),placeholder:"Demo: serum",tooltip:"Unique"})},projectId:function(t,a){return(0,e.jsx)(E._IT,{initialValue:t,readonly:a,rules:[{required:!0,pattern:/^.{1,50}$/,message:"1-50 characters are appropriate"}],width:"md",name:"projectId",label:(0,e.jsx)(V.FormattedMessage,{id:"project"}),placeholder:"Project Id",request:X()(C()().mark(function l(){var d,o;return C()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return d=[],i.next=3,_e.list({});case 3:return o=i.sent,o==null||o.data.map(function(h){var c={};return c.label=h.name,c.value=h.name,d.push(c),null}),i.abrupt("return",d);case 6:case"end":return i.stop()}},l)})),tooltip:"Unique"})},dim1:function(t,a){return(0,e.jsx)(E.VaQ,{initialValue:t,readonly:a,width:"md",name:"dim1",label:"Dim1"})},dim2:function(t,a){return(0,e.jsx)(E.VaQ,{initialValue:t,readonly:a,width:"md",name:"dim2",label:"Dim2"})},dim3:function(t,a){return(0,e.jsx)(E.VaQ,{initialValue:t,readonly:a,width:"md",name:"dim3",label:"Dim3"})},createDate:function(t,a){return(0,e.jsx)(E.Gal,{initialValue:t,readonly:a,width:"sm",name:"createDate",label:(0,e.jsx)(V.FormattedMessage,{id:"create.date"})})},lastModifiedDate:function(t,a){return(0,e.jsx)(E.Gal,{initialValue:t,readonly:a,width:"sm",name:"lastModifiedDate",label:(0,e.jsx)(V.FormattedMessage,{id:"update.date"})})}},fa=u(86548);function Nr(n,t){return _jsxs(ModalForm,{formRef:n,title:_jsx(FormattedMessage,{id:"create.sample"}),trigger:_jsx(Button,{type:"primary",children:_jsx(FormattedMessage,{id:"create.sample"})}),width:750,modalProps:{destroyOnClose:!0},onFinish:t,children:[_jsxs(ProForm.Group,{children:[SampleFields.projectId(),SampleFields.sampleNo(),SampleFields.dim1(),SampleFields.dim2(),SampleFields.dim3()]}),_jsx(ProForm.Group,{children:SampleFields.description()})]},"create")}function ma(n,t,a){return(0,e.jsxs)(G.Yr,{formRef:n,autoFocusFirstInput:!0,title:(0,e.jsx)(V.FormattedMessage,{id:"update.sample"}),trigger:(0,e.jsx)("a",{children:(0,e.jsx)(fa.Z,{})}),width:640,layout:"horizontal",labelCol:{span:6},wrapperCol:{span:16},modalProps:{destroyOnClose:!0,maskClosable:!1},onFinish:t,children:[g.id(a.id,!0),g.projectId(a.projectId,!0),g.sampleNo(a.sampleNo,!1),g.dim1(a.dim1,!1),g.dim2(a.dim2,!1),g.dim3(a.dim3,!1)]},"update")}var Lr={Negative:{text:"Negative",value:"Negative"},Positive:{text:"Positive",value:"Positive"}},zr={SAM:{text:"SAM",value:"SAM"},REF:{text:"REF",value:"REF"},MIX:{text:"MIX",value:"MIX"},BLK:{text:"BLK",value:"BLK"}},Ur=[{label:(0,e.jsx)("img",{height:20,src:"/img/Thermo.webp"}),value:"Thermo"},{label:(0,e.jsx)("img",{height:20,src:"/img/Sciex.jpg"}),value:"sciex"},{label:(0,e.jsx)("img",{height:30,src:"/img/Agilent.png"}),value:"agilent"},{label:(0,e.jsx)("img",{height:30,src:"/img/Bruker.svg"}),value:"bruker"}],Wr={PROFILE:{text:"PROFILE",value:"PROFILE"},CENTROIDED:{text:"CENTROIDED",value:"CENTROIDED"}},Qr={1:{text:"\u677F\u5B50\u968F\u673A",value:1},2:{text:"\u6837\u672C\u968F\u673A",value:2}},Gr={1:"Random Balance",2:"Stratified Balance"},En=[{label:"Random Balance",value:"1"},{label:"Stratified Balance",value:"2"}],Hr={1:"Simple Random",2:"Block Random"},In=[{label:"Simple Random",value:"1"},{label:"Block Random",value:"2"}],Ke={1:"dim1",2:"dim2",3:"dim3"},Rn=[{label:"dim1",value:"1"},{label:"dim2",value:"2"},{label:"dim3",value:"3"}],va={Horizontal:"Horizontal",Vertical:"Vertical"},ha={LETTER_NUMBER:"A-Z",NUMBER_NUMBER:"1-N"},ie={Normal:"gold",Custom:"pink",LTR:"#2db7f5",Pooled:"#c8ffab",Solvent:"#9371ff",Blank:"#00fc62"},A={Custom:"Custom",LTR:"LTR",Pooled:"Pooled",Solvent:"Solvent",Blank:"Blank"},pa={1:"81 well (9*9)",2:"96 well (8*12)",3:"384 well (16*24)"},Vr={1:{text:"\u4EBA\u5DE5\u5F55\u5165",value:1},2:{text:"\u6837\u672C\u52FE\u9009",value:2},3:{text:"Excel\u5BFC\u5165",value:3}},$r=[{label:"\u4EBA\u5DE5\u5F55\u5165",value:1},{label:"\u6837\u672C\u52FE\u9009",value:2},{label:"Excel\u5BFC\u5165",value:3}],Kr={1:{text:"9*9\u6837\u672C\u677F",value:1},2:{text:"96\u5B54\u677F",value:2},3:{text:"ep\u7BA1",value:3}},Yr={2:{text:"96\u5B54\u677F",value:2},4:{text:"ep\u7BA1",value:4}},Xr={1:{text:"Online",value:"1"},2:{text:"Offline",value:"2"}},Jr={SCAN_AND_UPDATE_RUNS:{text:"Scan Runs",value:"SCAN_AND_UPDATE_RUNS"},UPLOAD_LIBRARY_FILE:{text:"Upload Library",value:"UPLOAD_LIBRARY_FILE"},EXTRACTOR:{text:"XIC",value:"EXTRACTOR"},LIBRARY_PUSH:{text:"Push Library",value:"LIBRARY_PUSH"},TARGET_ANALYZE_WITH_RT:{text:"RT Targeted Analysis",value:"TARGET_ANALYZE_WITH_RT"},TARGET_ANALYZE_WITH_RI:{text:"RI Targeted Analysis",value:"TARGET_ANALYZE_WITH_RI"},PRE_QC:{text:"PreQC",value:"PRE_QC"},RI_CALIBRATION:{text:"RI Calibration",value:"RI_CALIBRATION"},BUILD_LIBRARY:{text:"Build Library",value:"BUILD_LIBRARY"}},qr={pos:{text:"pos",value:"pos"},neg:{text:"neg",value:"neg"},HILIC:{text:"HILIC",value:"HILIC"},lippos:{text:"lippos",value:"lippos"},GC:{text:"GC",value:"GC"}},ga={index:{text:"Index",value:"index"},set:{text:"Set",value:"set"},type:{text:"Type",value:"type"},position:{text:"Position",value:"position"},sampleNo:{text:"SampleNo",value:"SampleNo"},fileName:{text:"FileName",value:"fileName"},injVol:{text:"InjVol",value:"injVol"},path:{text:"Path",value:"path"},dim1:{text:"Dim1",value:"dim1"},dim2:{text:"Dim2",value:"dim2"},dim3:{text:"Dim3",value:"dim3"}},el={"6500+":{text:"6500+",value:"6500+"},HF:{text:"HF",value:"HF"},"HFX-1":{text:"HFX-1",value:"HFX-1"},"HFX-2":{text:"HFX-2",value:"HFX-2"},"GCMS-1":{text:"GCMS-1",value:"GCMS-1"},"GCMS-2":{text:"GCMS-2",value:"GCMS-2"}};function Sa(n,t,a){var l=[{key:"id",title:"ID",dataIndex:"id",hideInTable:!0,hideInSearch:!0},{key:"sampleNo",title:(0,e.jsx)(V.FormattedMessage,{id:"sample.no"}),dataIndex:"sampleNo",copyable:!0,sorter:function(o,r){return(o==null?void 0:o.sampleNo)>(r==null?void 0:r.sampleNo)?-1:1}},{key:"type",title:"Type",dataIndex:"type"},{key:"dim1",title:"dim1",dataIndex:"dim1"},{key:"dim2",title:"dim2",dataIndex:"dim2"},{key:"dim3",title:"dim3",dataIndex:"dim3"},{key:"createDate",title:(0,e.jsx)(V.FormattedMessage,{id:"create.date"}),dataIndex:"createDate",valueType:"dateTime",hideInSearch:!0,showSorterTooltip:!1,sorter:function(o,r){return(o==null?void 0:o.createDate)>(r==null?void 0:r.createDate)?-1:1}},{key:"option",title:(0,e.jsx)(V.FormattedMessage,{id:"option"}),valueType:"option",fixed:"right",width:"220px",hideInSearch:!0,render:function(o,r){return[ma(n,t,r),(0,e.jsx)(gt.Z,{title:(0,e.jsx)(V.FormattedMessage,{id:"confirm.delete"}),onConfirm:function(){return a(r.id)},children:(0,e.jsx)("a",{style:{color:"red"},children:(0,e.jsx)(me.Z,{})})},"delete")]}}];return l}var St=[{key:"index",title:"index",dataIndex:"index",width:60,render:function(t){return(0,e.jsx)(ce.Z,{color:"gray",style:{borderRadius:"70%"},children:t})}},{key:"Set No",title:"Set No",dataIndex:"set",ellipsis:!0,width:80},{key:"type",title:"Type",dataIndex:"type",width:100,render:function(t){switch(t){case"Normal":return(0,e.jsx)(ce.Z,{color:"gold",children:t});case"Blank":return(0,e.jsx)(ce.Z,{color:ie.Blank,children:t});case"Solvent":return(0,e.jsx)(ce.Z,{color:ie.Solvent,children:t});case"Pooled":return(0,e.jsx)(ce.Z,{color:ie.Pooled,children:t});case"LTR":return(0,e.jsx)(ce.Z,{color:ie.LTR,children:t});case"Custom":return(0,e.jsx)(ce.Z,{color:ie.Custom,children:t})}}},{key:"well",title:"Position",dataIndex:"position",ellipsis:!0,width:100,render:function(t){return(0,e.jsx)(ce.Z,{color:"gold",children:t})}},{disable:!0,title:"Sample No",dataIndex:"sampleNo",key:"sampleNo",search:!1},{key:"dim1",title:"dim1",dataIndex:"dim1",ellipsis:!0},{key:"dim2",title:"dim2",dataIndex:"dim2",ellipsis:!0},{key:"dim3",title:"dim3",dataIndex:"dim3",ellipsis:!0}],xa=u(12444),Tn=u.n(xa),ba=u(72004),Zn=u.n(ba),ja=u(31996),Bn=u.n(ja),ya=u(26037),Fn=u.n(ya),On=u(78809),An=u(33353),Ca=function(n){Bn()(a,n);var t=Fn()(a);function a(){return Tn()(this,a),t.apply(this,arguments)}return Zn()(a,[{key:"getDomain",value:function(){return"preorder"}},{key:"beforeAdd",value:function(){}},{key:"submit",value:function(){var l=X()(C()().mark(function o(r){var i;return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=new FormData,r.owner&&i.append("owner",r.owner),r.randomMethod&&i.append("randomMethod",r.randomMethod),r.saveType&&i.append("saveType",r.saveType),r.sampleTotal&&i.append("sampleTotal",r.sampleTotal),r.sampleList&&i.append("sampleList",r.sampleList),r.projectId&&i.append("projectId",r.projectId),r.file&&i.append("file",r.file),r.whiteExcelFile&&i.append("whiteExcelFile",r.whiteExcelFile),c.abrupt("return",(0,An.WY)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/add"),{method:"POST",requestType:"form",data:i}));case 10:case"end":return c.stop()}},o,this)}));function d(o){return l.apply(this,arguments)}return d}()}]),a}(On.b),ka=function(n){Bn()(a,n);var t=Fn()(a);function a(){return Tn()(this,a),t.apply(this,arguments)}return Zn()(a,[{key:"getDomain",value:function(){return"sample"}},{key:"beforeAdd",value:function(){}},{key:"uploadExcel",value:function(){var l=X()(C()().mark(function o(r){var i;return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("param",r),i=new FormData,r.projectId&&i.append("projectId",r.projectId),r.addMode&&i.append("uploadType",r.addMode),r.file&&i.append("file",r.file),c.abrupt("return",(0,An.WY)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/upload/excel"),{method:"POST",requestType:"form",data:i}));case 6:case"end":return c.stop()}},o,this)}));function d(o){return l.apply(this,arguments)}return d}()}]),a}(On.b),Kt=u(78158),Pa=u(88484),Nn=u(23430),Be=u(99807),Ln=u(2390),zn=u(69309),K=u(71577),ee=u(12461),oe=u(59652),at=u(71230),ue=u(15746),Un=u(14670),de=u(26713),Wn=u(85402),wa=u(97937),_a=u(73749),Da=u(60094),Ma=u(93471),Ea=u(55741),Ia=u(80737),Ra=u(58602),Ta=u(84485),Qn=function(n){var t;return(0,e.jsx)(e.Fragment,{children:(t=n.errorInfo)!==null&&t!==void 0&&t.length?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ta.Z.Text,{type:"danger",ellipsis:{tooltip:n.errorInfo},children:n.errorInfo})}):null})},Ee={excelModal:"excelModal___BcpFr",leftModal:"leftModal___ZvGvt",dragger:"dragger___wamx6",excelDes:"excelDes___fxXL1",progress:"progress___bpDNW",progressStr:"progressStr___yLFbW",successDiv:"successDiv___o3XRq",successStrP:"successStrP___waXvq",errorSpanA:"errorSpanA___iBxM5",excelSuccess:"excelSuccess___AY3_w",fileNameSpan:"fileNameSpan___u8bN2",nameSpan:"nameSpan___VN9Il",closeSpan:"closeSpan___VZg9g"},Za=function(n){return(0,e.jsx)(G.Yr,{width:n.width||"992px",title:n.title||(0,e.jsx)(V.FormattedMessage,{id:"file.error.content"}),submitter:{render:function(){return[]}},trigger:n.trigger,children:(0,e.jsx)(Ln.ZP,{scroll:{x:"1000px"},dataSource:n.errorList||[],rowKey:"key",pagination:{showQuickJumper:!0,defaultCurrent:1,defaultPageSize:5},options:!1,columns:n.columns||[],search:!1})},"addNew")},Ba=2,Fa=1,Oa=[{title:(0,e.jsx)(V.FormattedMessage,{id:"sample.no"}),dataIndex:"sampleId",key:"realName",showSorterTooltip:!1,width:"20%",ellipsis:!0,render:function(t,a){var l=a.sampleId;return(0,e.jsx)(Qn,{errorInfo:l,text:t})}},{title:(0,e.jsx)(V.FormattedMessage,{id:"error.msg"}),dataIndex:"errorMsg",key:"errorMsg",showSorterTooltip:!1,width:"25%",ellipsis:!0,render:function(t,a){var l=a.errorMsg;return(0,e.jsx)(Qn,{errorInfo:l,text:t})}}],Aa=function(n){var t=Ia.Z.useForm(),a=v()(t,1),l=a[0],d=(0,s.useState)([]),o=v()(d,2),r=o[0],i=o[1],h=(0,s.useState)(!1),c=v()(h,2),x=c[0],m=c[1],z=(0,s.useState)(!1),S=v()(z,2),U=S[0],$=S[1],O=(0,s.useState)(!1),F=v()(O,2),Z=F[0],Y=F[1],b=(0,s.useState)(!1),N=v()(b,2),W=N[0],J=N[1],be=(0,s.useState)(!1),je=v()(be,2),ye=je[0],ve=je[1],Ce=(0,s.useState)(!1),te=v()(Ce,2),ke=te[0],re=te[1],he=(0,s.useState)(100),Fe=v()(he,2),Le=Fe[0],Ge=Fe[1],He=(0,s.useState)([]),Pe=v()(He,2),y=Pe[0],Q=Pe[1],I=(0,V.useIntl)(),Ie={name:"file",action:n.actionUrl,method:"POST",accept:".xls,.xlsx",maxCount:1,headers:{"X-Access-Token":""},data:function(w){var _;return(_=n.id)!==null&&_!==void 0&&_.length?{file:w,id:n.id}:{file:w}},beforeUpload:function(w){var _=w.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"||w.type==="application/vnd.ms-excel";return _||ee.ZP.error("".concat(w.name," is not an excel file")),_||Ea.Z.LIST_IGNORE},onChange:function(w){if(console.log("info",w,"error",W),w.file.status==="removed"){i([]);return}if(w.file.status==="uploading"&&(m(!1),J(!1)),w.file.status==="done"){var _=w.file.response;if(i([w.file]),m(!0),_.success){var pe;if((pe=_.data)!==null&&pe!==void 0&&pe.length){J(!0),Q(_.data);return}J(!1)}else ee.ZP.error("".concat(w.file.name," ").concat(I.formatMessage({id:"upload.failed"}),",: ").concat(_.errorMessage)),i([]),J(!0),w.file.status="error"}else w.file.status==="error"&&(m(!0),ee.ZP.error("".concat(w.file.name," ").concat(I.formatMessage({id:"upload.failed"}))),J(!0))}};return(0,e.jsxs)(G.Yr,{width:"542px",submitter:{render:function(){return[(0,e.jsx)(K.Z,{onClick:function(){if(n.needSyncBank&&n.syncBankFlag){ee.ZP.error("Please Select Async Question Bank"),n.setSyncBankFirstFlag(!1);return}$(!0)},disabled:r.length==0||!x||W,htmlType:"button",children:n.newAddStr},"add"),(0,e.jsx)(K.Z,{onClick:function(){if(n.needSyncBank&&n.syncBankFlag){ee.ZP.error("Please Select Async Question Bank"),n.setSyncBankFirstFlag(!1);return}Y(!0)},disabled:r.length==0||!x||W,htmlType:"button",children:n.coverStr},"read")]}},title:n.title?n.title:"".concat(I.formatMessage({id:"import.excel"})),visible:n.visible,form:l,onVisibleChange:n.setVisible,modalProps:{destroyOnClose:!0},children:[(0,e.jsxs)("div",{className:Ee.excelDes,children:[(0,e.jsxs)(at.Z,{children:[(0,e.jsx)(ue.Z,{span:16,children:n.draggerStr||"".concat(I.formatMessage({id:"1.upload.tip"}))}),(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsx)("a",{href:n.standardFileUrl,children:(0,e.jsx)(V.FormattedMessage,{id:"download.template"})})})]}),(0,e.jsx)("div",{children:(0,e.jsx)(V.FormattedMessage,{id:"2.upload.tip"})})]}),(0,e.jsx)("br",{}),(0,e.jsxs)(Ra.Z,B()(B()({itemRender:function(w,_,pe,k){return _.status==="done"?(Ge(100),(0,e.jsx)(e.Fragment,{})):_.status==="uploading"?(Ge(_.percent),(0,e.jsx)(e.Fragment,{})):w},className:Ee.dragger},Ie),{},{children:[r!=null&&r.length&&!x?(0,e.jsx)("p",{className:Ee.progressStr,children:Le+"%"}):null,r!=null&&r.length?x?(0,e.jsxs)("div",{className:Ee.successDiv,onClick:function(w){w.stopPropagation()},children:[" ",(0,e.jsx)("br",{}),(0,e.jsx)("span",{className:Ee.successStrP,children:W?(0,e.jsxs)("span",{children:[(0,e.jsx)(V.FormattedMessage,{id:"upload.error.tip"}),"  ",(0,e.jsx)(Za,{columns:n.columns||Oa,errorList:y,trigger:(0,e.jsx)("a",{className:Ee.errorSpanA,children:(0,e.jsx)(V.FormattedMessage,{id:"check.errors"})})})," "]}):(0,e.jsx)(V.FormattedMessage,{id:"upload.file.success.please.select"})}),(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsxs)("div",{className:Ee.excelSuccess,children:[(0,e.jsxs)("span",{className:Ee.fileNameSpan,children:[(0,e.jsx)(Da.Z,{})," ","  ",(0,e.jsx)("span",{className:Ee.nameSpan,children:r[0].name})]}),(0,e.jsx)("a",{onClick:function(w){w.stopPropagation(),i([])},children:(0,e.jsx)("span",{className:Ee.closeSpan,children:(0,e.jsx)(wa.Z,{})})})]})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ma.Z,{className:Ee.progress,strokeColor:{"0%":"#1E90FF","100%":"#70A1FF"},showInfo:!1,percent:Le})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_a.Z,{theme:"outline",size:"32",fill:"#333"}),(0,e.jsx)("p",{style:{color:"#999"},children:(0,e.jsx)(V.FormattedMessage,{id:"click.to.upload"})}),(0,e.jsxs)("p",{style:{color:"#999"},children:[(0,e.jsx)(V.FormattedMessage,{id:"or"})," ",(0,e.jsx)(V.FormattedMessage,{id:"drag.file.here"})]})," "]})]})),n.children,(0,e.jsx)(G.Yr,{width:"482px",title:n.newAddStr||"".concat(I.formatMessage({id:"create.user"})),visible:U,submitter:{render:function(){return[(0,e.jsx)(K.Z,{onClick:function(){if(ye){ee.ZP.warn("".concat(I.formatMessage({id:"wait.for.creation"})));return}$(!1)},style:{width:"88px"},type:"default",htmlType:"submit",children:(0,e.jsx)(V.FormattedMessage,{id:"cancel"})},"cancel"),(0,e.jsx)(K.Z,{loading:ye,onClick:X()(C()().mark(function w(){var _;return C()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(ve(!0),!(r.length>0)){k.next=29;break}if(!W){k.next=6;break}return ee.ZP.error("".concat(I.formatMessage({id:"file.upload.failed.retry"}))),ve(!1),k.abrupt("return");case 6:if(x){k.next=10;break}return ee.ZP.warning("".concat(I.formatMessage({id:"wait.for.uploading"}))),ve(!1),k.abrupt("return");case 10:return k.prev=10,k.next=13,n.uploadHandle(Ba,r[0].originFileObj);case 13:if(_=k.sent,i([]),$(!1),!_.valueOf()){k.next=22;break}return n.setVisible(!1),l.resetFields(),m(!1),ve(!1),k.abrupt("return",Promise.resolve());case 22:k.next=27;break;case 24:k.prev=24,k.t0=k.catch(10),ve(!1);case 27:k.next=30;break;case 29:ee.ZP.error("".concat(I.formatMessage({id:"please.upload.file"})));case 30:ve(!1);case 31:case"end":return k.stop()}},w,null,[[10,24]])})),style:{width:"88px"},type:"primary",htmlType:"submit",children:(0,e.jsx)(V.FormattedMessage,{id:"confirm"})},"submit")]}},children:(0,e.jsx)("span",{style:{fontSize:"16px"},children:n.newAddStrDesc||"".concat(I.formatMessage({id:"user.add.confirm.tip"}))}),onFinish:X()(C()().mark(function q(){return C()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return ee.ZP.success("".concat(I.formatMessage({id:"success"}))),_.abrupt("return",!0);case 2:case"end":return _.stop()}},q)}))},"addNew"),(0,e.jsx)(G.Yr,{width:"482px",title:n.coverStr||"".concat(I.formatMessage({id:"overwrite.current.user"})),visible:Z,submitter:{render:function(){return[(0,e.jsx)(K.Z,{onClick:function(){if(ke){ee.ZP.warn("".concat(I.formatMessage({id:"wait.for.overwrite"})));return}Y(!1)},style:{width:"88px"},type:"default",htmlType:"submit",children:(0,e.jsx)(V.FormattedMessage,{id:"cancel"})},"cancel"),(0,e.jsx)(K.Z,{loading:ke,onClick:X()(C()().mark(function w(){var _;return C()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(re(!0),!(r.length>0)){k.next=29;break}if(!W){k.next=6;break}return ee.ZP.error("".concat(I.formatMessage({id:"file.upload.failed.retry"}))),re(!1),k.abrupt("return");case 6:if(x){k.next=10;break}return ee.ZP.warning("".concat(I.formatMessage({id:"wait.for.uploading"}))),re(!1),k.abrupt("return");case 10:return k.prev=10,k.next=13,n.uploadHandle(Fa,r[0].originFileObj);case 13:if(_=k.sent,i([]),Y(!1),!_.valueOf()){k.next=22;break}return n.setVisible(!1),l.resetFields(),m(!1),re(!1),k.abrupt("return",Promise.resolve());case 22:k.next=27;break;case 24:k.prev=24,k.t0=k.catch(10),ve(!1);case 27:k.next=30;break;case 29:ee.ZP.error("".concat(I.formatMessage({id:"please.upload.file"})));case 30:re(!1);case 31:case"end":return k.stop()}},w,null,[[10,24]])})),style:{width:"88px"},type:"primary",htmlType:"submit",children:I.formatMessage({id:"confirm"})},"submit")]}},children:(0,e.jsx)("span",{style:{fontSize:"16px"},children:n.addCoverStrDesc}),onFinish:X()(C()().mark(function q(){return C()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return ee.ZP.success("".concat(I.formatMessage({id:"success"}))),_.abrupt("return",!0);case 2:case"end":return _.stop()}},q)}))},"addCover")]})},Na=u(80129),La=u.n(Na),tl=function(t){return t!=null},nl=function(t){return t==null},al=function(t){return t!=null&&t!==""},rl=function(t){return t==null||t===""};function za(n,t){return La().parse(n.search.replace("?",""))[t]}var fe=u(96486);function Ua(n){var t=(0,fe.groupBy)(n,"dim1"),a=(0,fe.groupBy)(n,"dim2"),l=(0,fe.groupBy)(n,"dim3");return{dim1List:t,dim2List:a,dim3List:l}}function Wa(n){var t=(0,fe.groupBy)(n,"dim1"),a=(0,fe.groupBy)(n,"dim2"),l=(0,fe.groupBy)(n,"dim3"),d=[],o=[],r=[];return Object.keys(t).forEach(function(i){d.push({dim:"dim1",name:i,count:t[i].length})}),Object.keys(a).forEach(function(i){o.push({dim:"dim2",name:i,count:a[i].length})}),Object.keys(l).forEach(function(i){r.push({dim:"dim3",name:i,count:l[i].length})}),d.length>4&&Qa(d),d.length>4,{dimRes1:d,dimRes2:o,dimRes3:r}}function Qa(n){for(var t=!0,a=0;a<n.length;a++)if(!Ga(n[a].name)){t=!1;break}return t}function Ga(n){return n!=null&&n!==""&&!isNaN(Number(n.toString()))}function Ha(n){return n&&n.length>0?(n.sort(function(){return .5-Math.random()}),n):[]}function Gn(n,t){return n&&n.length>0?(n.sort(function(){return .5-Math.random()}),n.forEach(function(a,l){a.set=Math.ceil((l+1)/t)}),n):[]}function Va(n,t,a){if(n&&n.length>0){n.sort(function(){return .5-Math.random()});var l=Math.ceil(n.length/t),d=$a(n.length,l),o=(0,fe.groupBy)(n,Ke[a]),r=Array(l),i=[];Object.values(o).forEach(function(z){for(var S=0,U=Math.floor(z.length/l),$=0;$<d.length;$++)r[$]===void 0&&(r[$]=[]),r[$]=r[$].concat(z.slice(S,S+U)),S=S+U;i=i.concat(z.slice(S,z.length))});for(var h=0;h<i.length;h++)r[h%l].push(i[h]);for(var c=[],x=function(S){r[S].forEach(function(U){U.set=S+1}),c=c.concat(r[S])},m=0;m<r.length;m++)x(m);return c}return[]}function $a(n,t){for(var a=[],l=Math.floor(n/t),d=0;d<t;d++)a.push(l);for(var o=n-l*t,r=0;r<o;r++)a[r]=a[r]+1;return a}function Hn(n){var t=Object.entries((0,fe.groupBy)(JSON.parse(JSON.stringify(n)),"set")).sort(function(l,d){return l[0].localeCompare(d[0])}),a=[];return t.forEach(function(l){if(l[1]&&l[1].length>0){var d=(0,fe.groupBy)(l[1],"set");Object.values(d).forEach(function(o){a=a.concat(Ha(o))})}}),a}function Ka(n,t){var a=Object.entries((0,fe.groupBy)(JSON.parse(JSON.stringify(n)),"set")).sort(function(d,o){return d[0].localeCompare(o[0])}),l=[];return a.forEach(function(d){for(var o=d[1],r=(0,fe.groupBy)(o,Ke[t]),i="",h=[],c=Object.values(r).filter(function(re){return re.length!==0}).sort(function(re,he){return he.length-re.length}),x=[];c.length!=0;){var m=c.length,z=c[c.length-1].length,S="";switch(m){case 1:S="A";break;case 2:S="AB";break;case 3:S="ABC";break;case 4:S="ABCD";break;case 5:S="ABCDE";break;case 6:S="ABCDEF";break;case 7:S="ABCDEFG";break;case 8:S="ABCDEFGH";break;default:return ee.ZP.error("Unsupport Dim Length."),[]}var U=Vn(S),$=Ya(U,z);x.push($);for(var O=$n($),F=0;F<O.length;F++)switch(O.charAt(F)){case"A":c[0].pop();break;case"B":c[1].pop();break;case"C":c[2].pop();break;case"D":c[3].pop();break;case"E":c[4].pop();break;case"F":c[5].pop();break;case"G":c[6].pop();break;case"H":c[7].pop();break}c=c.filter(function(re){return re.length!==0})}c=Object.values((0,fe.groupBy)(JSON.parse(JSON.stringify(o)),Ke[t])).sort(function(re,he){return he.length-re.length}),x.sort(function(re,he){return he.length-re.length});for(var Z=x.length-1;Z>0;Z--)for(var Y=Math.floor(x[Z-1].length/x[Z].length),b=0,N=0;N<x[Z].length;N++)b+=Y,x[Z-1][b]+=x[Z][N];i=$n(x[0]);for(var W=0;W<i.length;W++)switch(i.charAt(W)){case"A":var J=c[0].pop();J&&h.push(J);break;case"B":var be=c[1].pop();be&&h.push(be);break;case"C":var je=c[2].pop();je&&h.push(je);break;case"D":var ye=c[3].pop();ye&&h.push(ye);break;case"E":var ve=c[4].pop();ve&&h.push(ve);break;case"F":var Ce=c[5].pop();Ce&&h.push(Ce);break;case"G":var te=c[6].pop();te&&h.push(te);break;case"H":var ke=c[7].pop();ke&&h.push(ke);break}l=l.concat(h)}),l.sort(function(d,o){return d.set-o.set}),l}function Vn(n){var t=[];if(n.length<=1)return[n];for(var a=0;a<n.length;a++)for(var l=n[a],d=n.slice(0,a)+n.slice(a+1,n.length),o=Vn(d),r=0;r<o.length;r++){var i=l+o[r];t.push(i)}return t}function Ya(n,t){for(var a=[],l=0;l<t;l++)a.push(n[Xa(0,n.length-1)]);return a}function Xa(n,t){var a=t-n,l=Math.random();return n+Math.round(l*a)}function $n(n){for(var t="",a=0;a<n.length;a++)t+=n[a];return t}var Ft=u(78677),Ja=u(13769),Kn=u.n(Ja),qa=u(64599),rt=u.n(qa),er=u(19632),Qe=u.n(er),xt=u(34041),ge=u(62721),tr={borderRadius:"50%",borderWidth:1,borderStyle:"solid",display:"flex",alignItems:"center",textAlign:"center"},nr=function(t){var a=t.size,l=t.style,d=Math.round(a/12),o=B()(B()({},tr),{},{width:a-2*d,height:a-2*d,margin:d},l),r=t.text(t.value);return(0,e.jsx)("div",{onClick:t.onClick&&function(i){return t.onClick(t.value,i)},onMouseEnter:t.onEnter&&function(i){return t.onEnter(t.value,i)},onMouseLeave:t.onLeave&&function(i){return t.onLeave(t.value,i)},onMouseUp:t.onMouseUp&&function(i){return t.onMouseUp(t.value,i)},onMouseDown:t.onMouseDown&&function(i){return t.onMouseDown(t.value,i)},className:t.className,style:o,children:(0,e.jsx)("div",{style:{width:"100%"},children:r===void 0?t.wellPlate.getPosition(t.value,"formatted"):r})})},ar=nr,Yn={userSelect:"none",WebkitUserSelect:"none"},rr=function(t){var a=t.displayAsGrid,l=a===void 0?!1:a;return l?(0,e.jsx)(lr,B()({},t)):(0,e.jsx)(ir,B()({},t))};function lr(n){for(var t=n.plate,a=t.columnLabels,l=t.rowLabels,d={borderStyle:"solid",borderColor:"gray",borderWidth:1},o=[],r=0;r<=l.length-1;r++){o.push({index:void 0,label:l[r],isHeader:!0,position:{column:-1,row:r}});for(var i=0;i<=a.length-1;i++){var h={row:r,column:i},c=t.getPosition(h,"index");o.push({index:c,label:t.getPosition(h,"formatted"),isHeader:!1,position:h})}}return(0,e.jsx)("div",{style:B()(B()({display:"grid",gridTemplateColumns:"max-content repeat(".concat(a.length,", 1fr)"),gridTemplateRows:"max-content repeat(".concat(l.length,", 1fr)")},Yn),d),children:[{index:void 0,label:"",isHeader:!0,position:{row:-1,column:-1}}].concat(Qe()(a.map(function(x,m){return{index:void 0,label:x,isHeader:!0,position:{row:-1,column:m}}})),o).map(function(x,m){var z,S=x.index,U=x.label,$=x.isHeader,O=x.position;if($){var F,Z,Y,b={label:U,position:O},N=(F=n.headerText)===null||F===void 0?void 0:F.call(n,b);return(0,e.jsx)("div",{className:(Z=n.headerClassName)===null||Z===void 0?void 0:Z.call(n,b),style:B()(B()(B()({},d),(Y=n.headerStyle)===null||Y===void 0?void 0:Y.call(n,b)),{},{padding:5,display:"flex",justifyContent:"center",alignItems:"center"}),children:N===void 0?U:N},"header-".concat(U,"-").concat(m))}var W=(z=n.text)===null||z===void 0?void 0:z.call(n,S);return(0,e.jsx)("div",{style:B()(B()({padding:5,display:"flex",justifyContent:"center",alignItems:"center"},d),n.wellStyle(S)),className:n.wellClassName(S),onClick:n.onClick&&function(J){return n.onClick(S,J)},onMouseEnter:n.onEnter&&function(J){return n.onEnter(S,J)},onMouseLeave:n.onLeave&&function(J){return n.onLeave(S,J)},onMouseUp:n.onMouseUp&&function(J){return n.onMouseUp(S,J)},onMouseDown:n.onMouseDown&&function(J){return n.onMouseDown(S,J)},children:(0,e.jsx)("div",{children:W===void 0?U:W})},S)})})}function ir(n){var t=n.plate,a=n.wellSize,l=a===void 0?40:a,d=t.rowLabels,o=t.columnLabels,r=4,i=1,h={width:l,textAlign:"center"},c={width:l,height:l},x={display:"flex",alignItems:"center",height:l},m=B()({paddingBottom:r,paddingRight:r,borderWidth:i,borderStyle:"solid",borderColor:"black",width:l*(t.columns+1)+r+i},Yn),z=o.map(function(U,$){var O;return(0,e.jsx)("div",{style:B()(B()({},h),(O=n.headerStyle)===null||O===void 0?void 0:O.call(n,{label:U,position:{column:$,row:-1}})),children:U},U)}),S=d.map(function(U,$){var O,F=o.map(function(Z,Y){var b,N,W=t.getPosition({row:$,column:Y},"index");return(0,e.jsx)("div",{style:c,children:(0,e.jsx)(ar,{wellPlate:t,className:(b=n.wellClassName)===null||b===void 0?void 0:b.call(n,W),style:(N=n.wellStyle)===null||N===void 0?void 0:N.call(n,W),onClick:n.onClick,onEnter:n.onEnter,onLeave:n.onLeave,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,text:n.text,value:W,size:l})},Z)});return(0,e.jsxs)("div",{style:x,children:[(0,e.jsx)("div",{style:B()(B()({},h),(O=n.headerStyle)===null||O===void 0?void 0:O.call(n,{label:U,position:{column:-1,row:$}})),children:U}),F]},U)});return(0,e.jsxs)("div",{style:m,children:[(0,e.jsxs)("div",{style:x,children:[(0,e.jsx)("div",{style:h}),z]}),S]})}var sr=["rows","columns","format","order","value","renderText","disabled","onChange","style","className","rangeSelectionMode","pickMode"],Ne;(function(n){n.columns="columns",n.rows="rows",n.zone="zone",n.off="off"})(Ne||(Ne={}));var or={userSelect:"none",WebkitUserSelect:"none",cursor:"default"},ur=function(t){var a=t.booked,l=t.disabled,d=t.selected,o={borderColor:"black"};return a&&(o.borderColor="orange"),l&&(o.backgroundColor="lightgray"),d&&(o.backgroundColor="lightgreen"),o},Xn=function(t){var a=t.rows,l=t.columns,d=t.format,o=t.order,r=t.value,i=t.renderText,h=i===void 0?function(y){var Q=y.label;return Q}:i,c=t.disabled,x=c===void 0?[]:c,m=t.onChange,z=t.style,S=z===void 0?ur:z,U=t.className,$=t.rangeSelectionMode,O=$===void 0?Ne.zone:$,F=t.pickMode,Z=F===void 0?!0:F,Y=Kn()(t,sr),b=(0,s.useMemo)(function(){return new ge.g8({rows:a,columns:l,positionFormat:d,iterationOrder:o})},[a,l,d,o]),N=(0,s.useMemo)(function(){return new Set(r.map(function(y){return b.getPosition(y,"index")}))},[r,b]),W=(0,s.useMemo)(function(){return new Set(x.map(function(y){return b.getPosition(y,"index")}))},[x,b]),J=(0,s.useState)(null),be=v()(J,2),je=be[0],ye=be[1],ve=(0,s.useState)(new Set),Ce=v()(ve,2),te=Ce[0],ke=Ce[1],re=(0,s.useCallback)(function(y,Q){var I;switch(O){case Ne.zone:{I=b.getPositionSubset(y,Q,ge.N6.zone,"index");break}case Ne.columns:case Ne.rows:{I=b.getPositionSubset(y,Q,O===Ne.columns?ge.N6.columns:ge.N6.rows,"index");break}case Ne.off:return;default:throw new Error("invalid range selection mode")}ke(new Set(I))},[O,b]),he=(0,s.useCallback)(function(y){if(te.size!==0){var Q=[],I=rt()(te),Ie;try{for(I.s();!(Ie=I.n()).done;){var q=Ie.value;W.has(b.getPosition(q,"index"))||y&&N.has(q)||Q.push(q)}}catch(k){I.e(k)}finally{I.f()}if(y){var w=rt()(N),_;try{for(w.s();!(_=w.n()).done;){var pe=_.value;te.has(pe)||Q.push(pe)}}catch(k){w.e(k)}finally{w.f()}}m(Q,Q.map(function(k){return b.getPosition(k,"formatted")}))}},[te,m,W,N,b]),Fe=(0,s.useCallback)(function(y){if(N.has(y)){var Q=new Set(N);Q.delete(y);var I=Array.from(Q);m(I,I.map(function(q){return b.getPosition(q,"formatted")}))}else if(!W.has(y)){var Ie=[].concat(Qe()(N),[y]);m(Ie,Ie.map(function(q){return b.getPosition(q,"formatted")}))}},[N,m,W,b]),Le=(0,s.useCallback)(function(y){if(U)return U({booked:te.has(y),disabled:W.has(y),selected:N.has(y),label:b.getPosition(y,"formatted"),position:b.getPosition(y,"row_column"),index:y,wellPlate:b})},[N,te,W,U,b]),Ge=(0,s.useCallback)(function(y){var Q=b.getPosition(y,"formatted");return h({index:y,label:Q,wellPlate:b,booked:te.has(y),position:b.getPosition(y,"row_column"),selected:N.has(y),disabled:W.has(y)})},[h,b,te,N,W]),He=(0,s.useCallback)(function(y){return B()(B()({},or),S==null?void 0:S({booked:te.has(y),disabled:W.has(y),selected:N.has(y),index:y,label:b.getPosition(y,"formatted"),position:b.getPosition(y,"row_column"),wellPlate:b}))},[W,te,N,S,b]),Pe=(0,s.useCallback)(function(y){y.shiftKey||Yt(y)?he(!0):he(!1),ye(null),ke(new Set)},[he]);return(0,s.useEffect)(function(){return window.addEventListener("mouseup",Pe),window.addEventListener("mouseleave",Pe),function(){window.removeEventListener("mouseup",Pe),window.removeEventListener("mouseleave",Pe)}},[Pe]),(0,e.jsx)(rr,B()(B()({},Y),{},{plate:b,wellStyle:He,wellClassName:Le,text:Ge,onEnter:function(Q){je!==null&&re(je,Q)},onLeave:function(Q){je===Q&&re(Q,Q)},onMouseDown:function(Q,I){ye(Q),!I.shiftKey&&!Yt(I)&&(W.has(b.getPosition(Q,"index"))?m([],[]):m([Q],[b.getPosition(Q,"formatted")]))},onClick:function(Q,I){(I.shiftKey||Yt(I))&&Z&&(Fe(Q),I.stopPropagation())}}))};function Yt(n){return navigator.platform==="MacIntel"?n.metaKey:n.ctrlKey}var Jn=u(3941),qn=u(74295),ll=u(52677),dr=u(93162),il=u(55733),Xt=20,cr=20;function sl(n){var t;console.log({params:n});var a=new ExcelJs.Workbook;n==null||(t=n.sheets)===null||t===void 0||t.forEach(function(l){return ta(a,l)}),nn(a,"".concat(n.filename,".xlsx"))}function ol(n){return Jt.apply(this,arguments)}function Jt(){return Jt=_asyncToGenerator(_regeneratorRuntime().mark(function n(t){var a,l,d;return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=new JsZip,d=t==null||(a=t.files)===null||a===void 0?void 0:a.map(function(){var i=_asyncToGenerator(_regeneratorRuntime().mark(function h(c){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,ea(c,l,"");case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},h)}));return function(h){return i.apply(this,arguments)}}()),r.next=4,Promise.all(d);case 4:l.generateAsync({type:"blob"}).then(function(i){saveAs(i,"".concat(t.zipName,".zip"))});case 5:case"end":return r.stop()}},n)})),Jt.apply(this,arguments)}function ul(n){return qt.apply(this,arguments)}function qt(){return qt=_asyncToGenerator(_regeneratorRuntime().mark(function n(t){var a,l,d;return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=new JsZip,d=t==null||(a=t.folders)===null||a===void 0?void 0:a.map(function(){var i=_asyncToGenerator(_regeneratorRuntime().mark(function h(c){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,fr(l,c);case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},h)}));return function(h){return i.apply(this,arguments)}}()),r.next=4,Promise.all(d);case 4:l.generateAsync({type:"blob"}).then(function(i){saveAs(i,"".concat(t.zipName,".zip"))});case 5:case"end":return r.stop()}},n)})),qt.apply(this,arguments)}function fr(n,t){return en.apply(this,arguments)}function en(){return en=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a){var l,d,o;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log({folder:a}),d=[],o=a==null||(l=a.files)===null||l===void 0?void 0:l.map(function(){var h=_asyncToGenerator(_regeneratorRuntime().mark(function c(x){return _regeneratorRuntime().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,ea(x,t,a.folderName);case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},c)}));return function(c){return h.apply(this,arguments)}}()),i.next=5,Promise.all([].concat(_toConsumableArray(o),d));case 5:case"end":return i.stop()}},n)})),en.apply(this,arguments)}function ea(n,t,a){return tn.apply(this,arguments)}function tn(){return tn=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a,l){var d,o,r,i,h;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return o=new ExcelJs.Workbook,t==null||(d=t.sheets)===null||d===void 0||d.forEach(function(m){return ta(o,m)}),x.next=4,o.xlsx.writeBuffer();case 4:r=x.sent,i=new Blob([r],{type:""}),l?(h=a.folder(l))===null||h===void 0||h.file("".concat(t.filename,".xlsx"),i):a.file("".concat(t.filename,".xlsx"),i);case 7:case"end":return x.stop()}},n)})),tn.apply(this,arguments)}function ta(n,t){var a=n.addWorksheet(t.sheetName);a.columns=an(t.columns),mr(a),vr(a,t)}function mr(n){var t=n.getRow(1);t.height=22,t.eachCell(function(a){return ra(a,{color:"dff8ff",fontSize:12,horizontal:"left"})})}function dl(n,t){var a=n.addRows(t==null?void 0:t.dataSource);aa(a)}function vr(n,t){var a=t.dataSource,l=t.columns,d=a==null?void 0:a.map(function(r){return l==null?void 0:l.map(function(i){var h,c=i==null||(h=i.render)===null||h===void 0?void 0:h.call(i,r[i.dataIndex],r);return c?_typeof(c)!=="object"?c:na(c):r[i.dataIndex]})});console.log({rowsData:d});var o=n.addRows(d);aa(o)}function na(n){if(n!=null&&n.type){var t,a=n==null||(t=n.props)===null||t===void 0?void 0:t.children;return a!=null&&a.type?na(a):a}return""}function aa(n){n==null||n.forEach(function(t){t.font={size:11,name:"\u5FAE\u8F6F\u96C5\u9ED1"},t.alignment={vertical:"middle",horizontal:"left",wrapText:!0}})}function nn(n,t){n.xlsx.writeBuffer().then(function(a){var l=new Blob([a],{type:""});(0,dr.saveAs)(l,t)})}function an(n){return n==null?void 0:n.map(function(t){var a={header:t.title,key:t.dataIndex,width:t.width/5>Xt?t.width/5:Xt};if(t.children){var l;a.children=(l=t.children)===null||l===void 0?void 0:l.map(function(d){return{key:d.dataIndex,header:d.title,width:d.width,parentKey:t.dataIndex}})}return a})}function hr(n){return Math.ceil(n/Xt)}function ra(n,t){var a=t||{},l=a.color,d=a.fontSize,o=a.horizontal,r=a.bold;n.fill={type:"pattern",pattern:"solid",fgColor:{argb:l}},n.font={bold:r!=null?r:!0,size:d!=null?d:11,name:"\u5FAE\u8F6F\u96C5\u9ED1"},n.alignment={vertical:"middle",wrapText:!0,horizontal:o!=null?o:"left"}}function cl(n,t){n.height=cr,n.eachCell(function(a){return ra(a,t)})}function fl(n,t,a,l,d,o){var r=-1;l.forEach(function(i,h){if(!(h<=r)){var c=i===d[h],x=h!==l.lastIndexOf(i);if(r=l.lastIndexOf(i),c&&x)o.mergeCells(Number(t.number),h+1,Number(a.number),l.lastIndexOf(i)+1);else if(c&&!x)o.mergeCells(Number(t.number),h+1,Number(a.number),h+1);else if(!c&&x){o.mergeCells(Number(t.number),h+1,Number(t.number),l.lastIndexOf(i)+1);var m=t.getCell(h+1);m.alignment={vertical:"middle",horizontal:"center"}}}})}function ml(n,t,a){var l=1;n.forEach(function(d){var o=d.width,r=d.children;if(r)r.forEach(function(){l+=1});else{var i=hr(o);i>1&&a.mergeCells(Number(t.number),l,Number(t.number),l+i-1),l+=i}})}function la(n,t,a,l,d,o,r){var i=n.index,h=n.wellPlate,c=n.disabled,x=n.booked,m=n.selected,z=h.getPosition(i,"row_column"),S={};return c&&(z.row===1?S.backgroundColor="grey":S.backgroundColor="lightgray"),x&&!c&&(S.borderColor="red"),t.indexOf(i+1)>-1&&(S.backgroundColor=ie.Custom),a.indexOf(i+1)>-1&&(S.backgroundColor=ie.LTR),l.indexOf(i+1)>-1&&(S.backgroundColor=ie.Pooled),d.indexOf(i+1)>-1&&(S.backgroundColor=ie.Solvent),o.indexOf(i+1)>-1&&(S.backgroundColor=ie.Blank),(r==null?void 0:r.indexOf(i+1))>-1&&(S.backgroundColor="gold"),m&&(S.borderColor="red"),S}var pr=["value"],gr=function(t){var a,l=(0,s.useState)(1),d=v()(l,2),o=d[0],r=d[1],i=(0,s.useState)([]),h=v()(i,2),c=h[0],x=h[1],m=(0,s.useState)([]),z=v()(m,2),S=z[0],U=z[1],$=(0,s.useState)("2"),O=v()($,2),F=O[0],Z=O[1],Y=(0,s.useState)("1"),b=v()(Y,2),N=b[0],W=b[1],J=(0,s.useState)("2"),be=v()(J,2),je=be[0],ye=be[1],ve=(0,s.useState)("1"),Ce=v()(ve,2),te=Ce[0],ke=Ce[1],re=(0,s.useState)(8),he=v()(re,2),Fe=he[0],Le=he[1],Ge=(0,s.useState)(12),He=v()(Ge,2),Pe=He[0],y=He[1],Q=(0,s.useState)(40),I=v()(Q,2),Ie=I[0],q=I[1],w=(0,s.useState)(ge.WH.LetterNumber),_=v()(w,2),pe=_[0],k=_[1],rn=(0,s.useState)([]),bt=v()(rn,2),Se=bt[0],jt=bt[1],Ve=(0,s.useState)([]),Ye=v()(Ve,2),ne=Ye[0],ln=Ye[1],Ot=(0,s.useState)(1),De=v()(Ot,2),yt=De[0],sn=De[1],At=(0,s.useState)(t.direction),Re=v()(At,1),Xe=Re[0],on=(0,s.useState)({}),Ct=v()(on,2),Me=Ct[0],kt=Ct[1],un=function(){return[].concat(Qe()(t.customQcPosition),Qe()(t.pooledQcPosition),Qe()(t.solventQcPosition),Qe()(t.ltrQcPosition),Qe()(t.blankQcPosition))},Nt=(0,s.useState)(t.customQcPosition),Te=v()(Nt,1),Je=Te[0],dn=(0,s.useState)(t.pooledQcPosition),Lt=v()(dn,1),we=Lt[0],Pt=(0,s.useState)(t.solventQcPosition),cn=v()(Pt,1),lt=cn[0],wt=(0,s.useState)(t.ltrQcPosition),fn=v()(wt,1),_t=fn[0],zt=(0,s.useState)(t.blankQcPosition),qe=v()(zt,1),ze=qe[0],mn=(0,s.useState)({}),Dt=v()(mn,2),et=Dt[0],vn=Dt[1],hn=(0,s.useState)(un().sort(function(f,p){return f-p})),Ut=v()(hn,1),Mt=Ut[0],pn=(0,s.useRef)();function it(f,p,D){Le(f),y(p),q(D)}var Ue=ot();function gn(f,p){var D=bn(f),R=(0,fe.groupBy)(D,"type");return R[A.Blank]&&R[A.Blank].length>0&&(p.splice(0,0,R[A.Blank][0]),R[A.Blank]=R[A.Blank].slice(1,R[A.Blank].length)),R[A.LTR]&&R[A.LTR].length>0&&(p.splice(p.length,0,R[A.LTR][0]),R[A.LTR]=R[A.LTR].slice(1,R[A.LTR].length)),Object.entries(R).forEach(function(ae){for(var se=Math.floor(p.length/(ae[1].length+1)),le=1;le<=ae[1].length;le++)p.splice(se*le,0,ae[1][le-1])}),p}function Sn(f){var p=(0,fe.groupBy)(f,"set");Object.entries(p).forEach(function(D){D[1].sort(function(ae,se){return ae.index-se.index});var R=gn(Number(D[0]),D[1]);R.map(function(ae,se){return ae.index=se+1}),p[D[0]]=R}),kt(p),t.setSetMap(p)}function xn(){var f;switch(t.plateType){case"1":it(9,9,50);break;case"2":it(8,12,50);break;case"3":it(16,24,28);break;default:it(8,12,40)}k(t.plateNumber);var p;(f=t.sampleData)!==null&&f!==void 0&&f.length?p=Math.ceil(t.sampleData.length/t.maxSamplesOnSinglePlate):p=1,jt(t.sampleData),sn(p),ln(Array.from(Array(p),function(D,R){return R+1}))}function st(f){if((f===void 0||f.length===0)&&(f=Se),f!==void 0){switch(F){case"1":f=Gn(f,t.maxSamplesOnSinglePlate);break;case"2":f=Va(f,t.maxSamplesOnSinglePlate,N);break;default:f=Gn(f,t.maxSamplesOnSinglePlate);break}return f}}function Oe(f){if((f===void 0||f.length===0)&&(f=Se),f===void 0)return[];switch(je){case"1":f=Et(Hn(f));break;case"2":f=Et(Ka(f,te));break;default:f=Et(Hn(f));break}return jt(f),f}(0,s.useEffect)(function(){xn()},[]),(0,s.useEffect)(function(){Se===void 0||Se.length===0?Oe(st(t.sampleData)):Oe(st(Se))},[F,N]),(0,s.useEffect)(function(){var f=Se==null?void 0:Se.sort(function(R,ae){return R.index-ae.index}),p=(0,fe.groupBy)(JSON.parse(JSON.stringify(Se)),"set"),D=[];Object.entries(p).forEach(function(R){var ae=(0,fe.groupBy)(R[1],Ke[N]);Object.entries(ae).forEach(function(se){D.push({set:"Set No"+R[0],dim:se[0],count:se[1].length})})}),U(D),x(Se.filter(function(R){return R.set===o})),Sn(f)},[Se]),(0,s.useEffect)(function(){x(Se.filter(function(f){return f.set===o}))},[o]);function ot(){var f=new Array(Pe).toString().split(",").map(function(xe,Tt){return Tt+1}),p=[];pe===ge.WH.Sequential&&(p=new Array(Fe).toString().split(",").map(function(xe,Tt){return Tt+1})),pe===ge.WH.LetterNumber&&(p=Qe()(Array(Fe).keys()).map(function(xe){return String.fromCharCode(xe+65)}));var D=[];if(Xe===ge.YL.ByColumn){var R=rt()(p),ae;try{for(R.s();!(ae=R.n()).done;){var se=ae.value,le=rt()(f),We;try{for(le.s();!(We=le.n()).done;){var $e=We.value;D.push(se+":"+$e)}}catch(xe){le.e(xe)}finally{le.f()}}}catch(xe){R.e(xe)}finally{R.f()}}else{var tt=rt()(f),Wt;try{for(tt.s();!(Wt=tt.n()).done;){var Qt=Wt.value,ut=rt()(p),Gt;try{for(ut.s();!(Gt=ut.n()).done;){var yn=Gt.value;D.push(yn+":"+Qt)}}catch(xe){ut.e(xe)}finally{ut.f()}}}catch(xe){tt.e(xe)}finally{tt.f()}}return D}function Et(f){if(f.length===0)return[];var p=[],D=(0,fe.groupBy)(f,"set");return Object.entries(D).forEach(function(R){var ae=Number(R[0]),se=R[1],le=It(1),We=[];se.forEach(function($e,tt){$e.index=le,$e.position=Ue[le-1],We.push(le),le++,le=It(le)}),et[ae]=We,p=p.concat(se)}),vn(et),p}function It(f){for(;Mt.indexOf(f)>-1;)f++;return f}function bn(f){var p=[];return ze.forEach(function(D){p.push({index:D,position:Ue[D-1],type:A.Blank,set:f})}),lt.forEach(function(D){p.push({index:D,position:Ue[D-1],type:A.Solvent,set:f})}),Je.forEach(function(D){p.push({index:D,position:Ue[D-1],type:A.Custom,set:f})}),_t.forEach(function(D){p.push({index:D,position:Ue[D-1],type:A.LTR,set:f})}),we.forEach(function(D){p.push({index:D,position:Ue[D-1],type:A.Pooled,set:f})}),p.sort(function(D,R){return D.index-R.index}),p}function jn(f){var p=f.value,D=Kn()(f,pr),R=(0,s.useState)(p),ae=v()(R,2),se=ae[0],le=ae[1];return(0,e.jsx)(Xn,B()({value:se,onChange:function($e){le($e)}},D))}function ia(){var f=new qn.Workbook,p=f.addWorksheet("sheet");p.properties.defaultRowHeight=20,p.columns=an(St),p.addRows(Me[o]),nn(f,"Injection-Random-Simple-SetNo"+o+".xlsx")}var Rt={xAxis:{label:{style:{fill:"black",fontSize:12,fontWeight:500}}},yAxis:{label:{style:{fill:"black",fontSize:12,fontWeight:500}}},legend:{itemName:{style:{fill:"black",fontSize:12,fontWeight:500}}}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(at.Z,{gutter:[5,5],children:[(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsx)(oe.Z,{size:"small",title:"Base Information",children:(0,e.jsxs)(de.Z,{children:["Total Samples:",(0,e.jsx)(ce.Z,{color:"green",children:(a=t.sampleData)===null||a===void 0?void 0:a.length}),"Total Plates:",(0,e.jsx)(ce.Z,{color:"green",children:yt}),"Direction:",(0,e.jsx)(ce.Z,{color:"green",children:Xe===ge.YL.ByRow?"Vertical":"Horizontal"})]})})}),(0,e.jsx)(ue.Z,{span:16,children:(0,e.jsx)(oe.Z,{size:"small",title:"QC Information",children:(0,e.jsxs)(de.Z,{size:30,children:[(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(Be.Z,{style:{color:ie.Custom}}),(0,e.jsx)("b",{children:Je.length})," Custom QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(Be.Z,{style:{color:ie.LTR}}),(0,e.jsx)("b",{children:_t.length})," Long-Term Reference QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(Be.Z,{style:{color:ie.Pooled}}),(0,e.jsx)("b",{children:we.length})," Pooled QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(Be.Z,{style:{color:ie.Blank}}),(0,e.jsx)("b",{children:ze.length})," Blank QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(Be.Z,{style:{color:ie.Solvent}}),(0,e.jsx)("b",{children:lt.length})," Solvent QC"]})]})})}),(0,e.jsx)(ue.Z,{span:12,children:(0,e.jsx)(oe.Z,{size:"small",title:"Distribution on Sets",extra:(0,e.jsxs)(de.Z,{children:["Inter-Batch Balancing:",(0,e.jsx)(xt.Z,{style:{width:150},defaultValue:En[1],size:"small",options:En,onSelect:function(p){return Z(p)}}),"Dim:",(0,e.jsx)(xt.Z,{style:{width:80},defaultValue:"1",size:"small",options:Rn,onSelect:function(p){return W(p)}}),(0,e.jsx)(K.Z,{type:"primary",size:"small",onClick:function(){return Oe(st())},children:"Balance"})]}),children:(0,e.jsx)(Ft.Z,B()({height:150,autoFit:!0,isStack:!0,data:S,xField:"set",yField:"count",seriesField:"dim"},Rt))})}),(0,e.jsx)(ue.Z,{span:12,children:(0,e.jsx)(oe.Z,{title:"Injection Order on Set No"+o,size:"small",extra:(0,e.jsxs)(de.Z,{children:["Intra-Batch Randomization:",(0,e.jsx)(xt.Z,{style:{width:150},defaultValue:In[1],size:"small",options:In,onSelect:function(p){return ye(p)}}),"Dim:",(0,e.jsx)(xt.Z,{style:{width:80},defaultValue:"1",size:"small",options:Rn,onSelect:function(p){return ke(p)}}),(0,e.jsx)(K.Z,{type:"primary",size:"small",onClick:function(){return Oe()},children:"Random"})]}),children:(0,e.jsx)(Jn.Z,B()(B()({height:150,autoFit:!0,data:c,xField:"index",colorField:Ke[te],size:5,shape:["circle","square","diamond"],yField:Ke[te],shapeField:Ke[te]},Rt),{},{xAxis:!1,legend:!1}))})}),(0,e.jsx)(ue.Z,{span:10,children:(0,e.jsx)(oe.Z,{size:"small",title:"Plate Design--Set No"+o,extra:(0,e.jsxs)(de.Z,{children:["Set No.",(0,e.jsx)(xt.Z,{size:"small",defaultValue:1,style:{width:80},onSelect:function(p){return r(Number(p))},options:ne==null?void 0:ne.map(function(f){return{value:f,label:f}})})]}),children:(0,e.jsx)("center",{children:(0,e.jsx)(jn,{rows:Fe,columns:Pe,wellSize:Ie,renderText:function(p){var D=p.index;return(0,e.jsx)("div",{style:{fontSize:12},children:D+1})},value:[0],displayAsGrid:!1,format:pe,order:Xe,rangeSelectionMode:Ne.zone,style:function(p){var D=p.index,R=p.wellPlate,ae=p.disabled,se=p.booked,le=p.selected;return la({index:D,wellPlate:R,disabled:ae,booked:se,selected:le},Je,_t,we,lt,ze,et[o])}})})})}),(0,e.jsx)(ue.Z,{span:14,children:(0,e.jsx)(oe.Z,{size:"small",title:"Set No."+o,children:(0,e.jsx)(E.QVr,{size:"small",columns:St,actionRef:pn,dataSource:Me[o],rowKey:"id",search:!1,pagination:{pageSize:15},toolBarRender:!1})})})]})})},Sr=gr,xr=u(26598),br=u(27049),jr=function(t,a){var l=t==null?void 0:t.setMap,d=(0,s.useRef)(),o=(0,s.useState)(!1),r=v()(o,2),i=r[0],h=r[1],c=(0,s.useState)(),x=v()(c,2),m=x[0],z=x[1];function S(O){var F=new qn.Workbook,Z=F.addWorksheet("sheet");Z.properties.defaultRowHeight=20,Z.columns=an(m||St),Z.addRows(l[O]),nn(F,"Injection-Random-Simple-SetNo"+O+".xlsx")}var U=[];Object.keys(l).forEach(function(O){l[O].forEach(function(F){U.push(F)})}),console.log("previewSetMap",U);var $=[{key:"setNo",dataIndex:"setNo",title:"Set",width:80,render:function(F,Z){return Z[0]}},{key:"qcSamples",dataIndex:"qcSamples",title:"QC",width:80,render:function(F,Z){return(0,e.jsx)(ce.Z,{children:Z[1].filter(function(Y){return Y.type!=="Normal"}).length})}},{key:"samples",dataIndex:"samples",title:"Samples",width:80,render:function(F,Z){return(0,e.jsx)(ce.Z,{children:Z[1].filter(function(Y){return Y.type==="Normal"}).length})}},{key:"sequence",dataIndex:"sequence",title:"Sequence",render:function(F,Z){return(0,e.jsx)(Jn.Z,{width:1400,height:30,data:Z[1],xField:"index",autoFit:!0,colorField:"type",size:5,xAxis:!1,yAxis:!1,yField:"set",padding:[0,10,0,10],legend:!1,shape:"square",color:function(b){var N=b.type;return ie[N]},tooltip:{fields:["sampleNo","type","index","dim1","dim2","dim3"]}})}},{key:"link",title:"Link",width:80,render:function(F,Z){return(0,e.jsx)(K.Z,{type:"primary",size:"small",disabled:!m,onClick:function(){S(Z[0])},children:"Export"})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe.Z,{size:"small",title:"Plate List",extra:(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",size:"small",onClick:function(){h(!0)},children:"WorkSheet Header"}),(0,e.jsx)(K.Z,{type:"primary",size:"small",disabled:!m,onClick:function(){Object.keys(l).forEach(function(F){S(Number(F))})},children:"Export All"})]}),children:(0,e.jsx)(xr.Z,{pagination:!1,size:"small",rowKey:"setNo",columns:$,dataSource:Object.entries(l)})}),(0,e.jsx)(oe.Z,{title:"Preview",children:(0,e.jsx)(E.QVr,{search:!1,toolBarRender:!1,size:"small",columns:m||St,dataSource:U,pagination:{style:{marginBottom:0},pageSize:20}})}),(0,e.jsxs)(E.Yr8,{modalProps:{destroyOnClose:!0,maskClosable:!0},submitter:!1,title:"Edit WorkSheet Header",width:1200,open:i,onOpenChange:h,children:[(0,e.jsx)(E.A96,{onFinish:function(F){ee.ZP.info("Update success");var Z=[];F==null||F.tableLabels.forEach(function(Y){Z.push({title:Y.title,name:Y.name,dataIndex:Y.dataIndex,desc:Y.desc})}),z(Z),console.log("value",F,Z)},submitter:{searchConfig:{resetText:"reset",submitText:"confirm"}},children:(0,e.jsx)(E.ux1,{name:"tableLabels",label:"WorkSheet Header Description",deleteIconProps:{tooltipText:"Delete"},copyIconProps:{tooltipText:"copy"},creatorButtonProps:{creatorButtonText:"add"},initialValue:m||St,children:(0,e.jsxs)(E.UWz,{children:[(0,e.jsx)(E.VaQ,{required:!0,name:"title",label:"title",width:"sm",placeholder:""}),(0,e.jsx)(E._IT,{width:"sm",name:"dataIndex",required:!0,label:"Index Mapping",valueEnum:ga,placeholder:""}),(0,e.jsx)(E.VaQ,{name:"desc",label:"description",width:"sm",placeholder:""})]})})}),(0,e.jsx)(br.Z,{type:"horizontal"}),(m==null?void 0:m.length)>0?(0,e.jsx)(oe.Z,{title:"Preview",extra:(0,e.jsxs)(K.Z,{type:"primary",children:[(0,e.jsx)(Nn.Z,{}),"Download"]}),children:(0,e.jsx)(E.QVr,{search:!1,toolBarRender:!1,rowKey:function(F){return F.dataIndex},size:"small",columns:m,pagination:{style:{marginBottom:0},pageSize:5}})}):(0,e.jsx)("div",{onClick:function(){console.log("table",m)}})]})]})},yr=jr,Cr=zn.Z.Step,kr=function(){var t,a=new ka;new Ca;var l=(0,s.useState)(),d=v()(l,2),o=d[0],r=d[1],i=(0,s.useState)(0),h=v()(i,2),c=h[0],x=h[1],m=(0,s.useRef)(),z=(0,s.useRef)(),S=(0,s.useState)(1),U=v()(S,2),$=U[0],O=U[1],F=(0,s.useState)(),Z=v()(F,2),Y=Z[0],b=Z[1],N=(0,s.useState)([]),W=v()(N,2),J=W[0],be=W[1],je=(0,s.useState)(!1),ye=v()(je,2),ve=ye[0],Ce=ye[1],te=(0,s.useState)(8),ke=v()(te,2),re=ke[0],he=ke[1],Fe=(0,s.useState)(12),Le=v()(Fe,2),Ge=Le[0],He=Le[1],Pe=(0,s.useState)(55),y=v()(Pe,2),Q=y[0],I=y[1],Ie=(0,s.useState)(),q=v()(Ie,2),w=q[0],_=q[1],pe=(0,s.useState)(1),k=v()(pe,2),rn=k[0],bt=k[1],Se=(0,s.useState)([]),jt=v()(Se,2),Ve=jt[0],Ye=jt[1];(0,s.useState)(["1","2","3","4","5","6","7","8","9"]);var ne=(0,V.useIntl)(),ln=(0,s.useState)([]),Ot=v()(ln,2),De=Ot[0],yt=Ot[1],sn=(0,s.useState)([]),At=v()(sn,2),Re=At[0],Xe=At[1],on=(0,s.useState)([]),Ct=v()(on,2),Me=Ct[0],kt=Ct[1],un=(0,s.useState)([]),Nt=v()(un,2),Te=Nt[0],Je=Nt[1],dn=(0,s.useState)([]),Lt=v()(dn,2),we=Lt[0],Pt=Lt[1],cn=(0,s.useState)("2"),lt=v()(cn,2),wt=lt[0],fn=lt[1],_t=(0,s.useState)(96),zt=v()(_t,2),qe=zt[0],ze=zt[1],mn=(0,s.useState)(ge.WH.LetterNumber),Dt=v()(mn,2),et=Dt[0],vn=Dt[1],hn=(0,s.useState)(ge.YL.ByRow),Ut=v()(hn,2),Mt=Ut[0],pn=Ut[1],it=(0,s.useState)({}),Ue=v()(it,2),gn=Ue[0],Sn=Ue[1],xn=(0,s.useState)(1),st=v()(xn,2),Oe=st[0],ot=st[1],Et=(0,s.useState)(),It=v()(Et,2),bn=It[0],jn=It[1],ia=(0,s.useState)(),Rt=v()(ia,2),f=Rt[0],p=Rt[1],D=(0,s.useState)(),R=v()(D,2),ae=R[0],se=R[1],le=(0,s.useState)(),We=v()(le,2),$e=We[0],tt=We[1],Wt=(0,s.useState)([]),Qt=v()(Wt,2),ut=Qt[0],Gt=Qt[1],yn=(0,s.useState)([]),xe=v()(yn,2),Tt=xe[0],wr=xe[1],_r=(0,s.useState)([]),sa=v()(_r,2),Dr=sa[0],Mr=sa[1],Er=za((0,V.useLocation)(),"projectId");(0,s.useEffect)(function(){r(Er)},[]),(0,s.useEffect)(function(){Tr()},[Oe]);var Ir=function(j){x(j)},Ht=function(j,M,H){he(j),He(M),I(H)},Rr=function(j){j.forEach(function(M){De.indexOf(M)!==-1&&De.splice(De.indexOf(M),1),Te.indexOf(M)!==-1&&Te.splice(Te.indexOf(M),1),Me.indexOf(M)!==-1&&Me.splice(Me.indexOf(M),1),Re.indexOf(M)!==-1&&Re.splice(Re.indexOf(M),1),we.indexOf(M)!==-1&&we.splice(we.indexOf(M),1)}),Vt(De,we,Te,Me,Re)},Cn=function(){return qe+Re.length+Te.length+Me.length+De.length+we.length},dt=function(){return Re.length+Te.length+Me.length+De.length+we.length},Tr=function(){switch(_(void 0),wt){case"1":Cn()>81&&(dt()>81?_("Max Samples Count + QC Count must <= 81"):ze(81-dt()));break;case"2":Cn()>96&&(dt()>96?_("Max Samples Count + QC Count must <= 96"):ze(96-dt()));break;case"3":Cn()>384&&(dt()>384?_("Max Samples Count + QC Count must <= 384"):ze(384-dt()));break}};function Zr(){return{actions:[(0,e.jsx)(K.Z,{type:"primary",icon:(0,e.jsx)(Pa.Z,{}),onClick:function(){Ce(!0)},children:(0,e.jsx)(V.FormattedMessage,{id:"batch.import.samples"})},"batchImport"),(0,e.jsx)(K.Z,{icon:(0,e.jsx)(Nn.Z,{}),children:(0,e.jsx)("a",{href:"".concat(Kt.H,"/static/SampleTemplate.xlsx"),children:" Download Sample Excel"})},"downloadTemplate"),(0,e.jsx)(K.Z,{danger:!0,icon:(0,e.jsx)(me.Z,{}),onClick:Or,children:" Delete"},"delete")],settings:[]}}var Vt=function(j,M,H,T,Ae){yt(j),Pt(M),Je(H),kt(T),Xe(Ae),ot(Oe+1)};function Br(P){return kn.apply(this,arguments)}function kn(){return kn=X()(C()().mark(function P(j){var M;return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,b(!0),T.next=4,a.update(j);case 4:return m==null||(M=m.current)===null||M===void 0||M.reload(),ee.ZP.success("".concat(ne.formatMessage({id:"update.success"}))),T.abrupt("return",!0);case 9:return T.prev=9,T.t0=T.catch(0),ee.ZP.error("".concat(ne.formatMessage({id:"update.failed"}))),T.abrupt("return",!1);case 13:return T.prev=13,b(!1),T.finish(13);case 16:case"end":return T.stop()}},P,null,[[0,9,13,16]])})),kn.apply(this,arguments)}function Fr(P){return Pn.apply(this,arguments)}function Pn(){return Pn=X()(C()().mark(function P(j){var M;return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,b(!0),T.next=4,a.delete(j);case 4:return ee.ZP.success("".concat(ne.formatMessage({id:"delete.success"}))),T.abrupt("return",!0);case 8:return T.prev=8,T.t0=T.catch(0),ee.ZP.error("".concat(ne.formatMessage({id:"delete.failed"}))),T.abrupt("return",!1);case 12:return T.prev=12,m==null||(M=m.current)===null||M===void 0||M.reload(),b(!1),T.finish(12);case 16:case"end":return T.stop()}},P,null,[[0,8,12,16]])})),Pn.apply(this,arguments)}function Or(){return wn.apply(this,arguments)}function wn(){return wn=X()(C()().mark(function P(){var j;return C()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(J.length!=0){H.next=3;break}return ee.ZP.warn("".concat(ne.formatMessage({id:"select.project"}))),H.abrupt("return",!1);case 3:return H.prev=3,b(!0),H.next=7,a.remove(J);case 7:return be([]),m==null||(j=m.current)===null||j===void 0||j.reload(),ee.ZP.success("".concat(ne.formatMessage({id:"delete.success"}))),H.abrupt("return",!0);case 13:return H.prev=13,H.t0=H.catch(3),ee.ZP.error("".concat(ne.formatMessage({id:"delete.failed"}))),H.abrupt("return",!1);case 17:return H.prev=17,b(!1),H.finish(17);case 20:case"end":return H.stop()}},P,null,[[3,13,17,20]])})),wn.apply(this,arguments)}function Ar(P){return _n.apply(this,arguments)}function _n(){return _n=X()(C()().mark(function P(j){var M,H,T,Ae,Bt,Ze,$t,ua,da,ca;return C()().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,a.all(B()(B()({},j),{},{projectId:o}));case 2:return M=ft.sent,H=M.data,bt(Math.ceil(H.length/96)),T=Ua(H),Ae=T.dim1List,Bt=T.dim2List,Ze=T.dim3List,jn(M.data),p(Ae),se(Bt),tt(Ze),$t=Wa(H),ua=$t.dimRes1,da=$t.dimRes2,ca=$t.dimRes3,Gt(ua),wr(da),Mr(ca),O(H.length),ft.abrupt("return",Promise.resolve(M));case 16:case"end":return ft.stop()}},P)})),_n.apply(this,arguments)}var Dn={height:600,isStack:!0,isPercent:!0,xField:"dim",seriesField:"name",xAxis:{label:{style:{fill:"black",fontSize:16,fontWeight:500}}},yAxis:{label:{style:{fill:"black",fontSize:14,fontWeight:300}}},yField:"count",padding:[100,0,0,0],legend:{position:"top",itemHeight:12,layout:"horizontal",flipPage:!1,itemName:{style:{fill:"black",fontSize:12,fontWeight:500}}},label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6},content:function(j){return(j.count*100).toFixed(2)+"%"}}},ct=function(j){switch(j){case A.Custom:yt([]);break;case A.LTR:Je([]);break;case A.Pooled:Xe([]);break;case A.Solvent:kt([]);break;case A.Blank:Pt([]);break;default:Vt([],[],[],[],[]);break}ot(Oe+1)},Zt=function(j){if(Ve&&Ve.length>0){var M=Ve.map(function(H){return H+1});switch(Rr(M),j){case A.Custom:yt(M);break;case A.LTR:Je(M);break;case A.Pooled:Xe(M);break;case A.Solvent:kt(M);break;case A.Blank:Pt(M);break;default:break}ot(Oe+1),Ye([])}},oa=[{title:"Upload Samples",content:(0,e.jsx)(oe.Z,{children:(0,e.jsxs)(at.Z,{gutter:[5,5],children:[(0,e.jsx)(ue.Z,{span:16,children:(0,e.jsx)(Ln.ZP,{scroll:{x:"max-content"},headerTitle:$+" Samples",actionRef:m,rowKey:"id",loading:Y,size:"small",toolbar:Zr(),search:!1,pagination:{pageSize:20},request:Ar,columns:Sa(z,Br,Fr),rowSelection:{selectedRowKeys:J,onChange:function(j){be(j)}}})}),(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsxs)(at.Z,{gutter:[5,5],children:[(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsx)(oe.Z,{size:"small",title:"Dim1",children:(0,e.jsx)(Ft.Z,B()({data:ut},Dn))})}),(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsx)(oe.Z,{size:"small",title:"Dim2",children:(0,e.jsx)(Ft.Z,B()({data:Tt},Dn))})}),(0,e.jsx)(ue.Z,{span:8,children:(0,e.jsx)(oe.Z,{size:"small",title:"Dim3",children:(0,e.jsx)(Ft.Z,B()({data:Dr},Dn))})})]})})]})})},{title:"Design Params",content:(0,e.jsx)(oe.Z,{children:(0,e.jsxs)(at.Z,{gutter:[5,5],children:[(0,e.jsx)(ue.Z,{span:6,children:(0,e.jsx)(oe.Z,{title:"Define Generate Params",children:(0,e.jsxs)(at.Z,{children:[(0,e.jsxs)(ue.Z,{span:24,children:[w!==void 0?(0,e.jsx)(Un.Z,{type:"error",banner:!0,message:w}):(0,e.jsx)(e.Fragment,{}),(0,e.jsx)(Un.Z,{type:"success",banner:!0,message:rn+" Plates Needed"})]}),(0,e.jsx)(ue.Z,{span:24,children:(0,e.jsx)(E.A96,{style:{marginTop:20},onValuesChange:function(j){_(void 0),j.plateType&&fn(j.plateType),j.maxSamplesOnSinglePlate&&ze(j.maxSamplesOnSinglePlate),bt(Math.ceil($/qe)),ot(Oe+1)},name:"basic",layout:"vertical",submitter:!1,initialValues:{plateNumber:et,maxSamplesOnSinglePlate:qe,plateType:wt},children:(0,e.jsxs)(E.A96.Group,{children:[(0,e.jsx)(G._I,{rules:[{required:!0,message:"required"}],width:150,name:"plateType",label:"Plate",valueEnum:pa,fieldProps:{onSelect:function(j){switch(j){case"1":Ht(9,9,60);break;case"2":Ht(8,12,55);break;case"3":Ht(16,24,32);break;default:Ht(8,12,60)}Vt([],[],[],[],[])}}}),(0,e.jsx)(G.k_,{rules:[{required:!0,message:"required"}],width:150,name:"maxSamplesOnSinglePlate",min:1,label:"Max Samples on Single Plate",fieldProps:{value:qe,onChange:function(j){ze(j)}}}),(0,e.jsx)(G._I,{rules:[{required:!0,message:"required"}],width:150,name:"plateNumber",label:"Plate Number",valueEnum:ha,fieldProps:{onSelect:function(j){vn(j)}}}),(0,e.jsx)(G._I,{rules:[{required:!0,message:"required"}],width:150,name:"direction",label:"Direction",valueEnum:va,fieldProps:{value:Mt===ge.YL.ByRow?"Vertical":"Horizontal",onSelect:function(j){pn(j==="Vertical"?ge.YL.ByRow:ge.YL.ByColumn),Vt([],[],[],[],[]),Ye([])}}})]})})})]})})}),(0,e.jsx)(ue.Z,{span:12,children:(0,e.jsx)(oe.Z,{title:"Define QC Positions",children:(0,e.jsx)("center",{children:(0,e.jsx)(Xn,{value:Ve,rows:re,columns:Ge,wellSize:Q,format:et,order:Mt,style:function(j){var M=j.index,H=j.wellPlate,T=j.disabled,Ae=j.booked,Bt=j.selected;return la({index:M,wellPlate:H,disabled:T,booked:Ae,selected:Bt},De,Te,Re,Me,we,[])},onChange:function(j,M){j.length===1&&Ve.length===1&&j[0]===Ve[0]?Ye([]):Ye(j)},renderText:function(j){var M=j.label;return(0,e.jsx)("div",{style:{fontSize:12},children:(0,e.jsx)("div",{children:M})})}})})})}),(0,e.jsx)(ue.Z,{span:6,children:(0,e.jsx)(oe.Z,{children:(0,e.jsxs)(de.Z,{direction:"vertical",style:{marginBottom:10,marginTop:100},children:[(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return Zt(A.Custom)},children:"Set"}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct(A.Custom)},children:"Clear"}),(0,e.jsx)(Be.Z,{style:{fontSize:"24px",color:ie.Custom}}),(0,e.jsx)("b",{children:De.length})," Custom QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return Zt(A.LTR)},children:"Set"}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct(A.LTR)},children:"Clear"}),(0,e.jsx)(Be.Z,{style:{fontSize:"24px",color:ie.LTR}}),(0,e.jsx)("b",{children:Te.length})," Long-Term Reference QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return Zt(A.Pooled)},children:"Set"}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct(A.Pooled)},children:"Clear"}),(0,e.jsx)(Be.Z,{style:{fontSize:"24px",color:ie.Pooled}}),(0,e.jsx)("b",{children:Re.length})," Pooled QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return Zt(A.Solvent)},children:"Set"}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct(A.Solvent)},children:"Clear"}),(0,e.jsx)(Be.Z,{style:{fontSize:"24px",color:ie.Solvent}}),(0,e.jsx)("b",{children:Me.length})," Solvent QC"]}),(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return Zt(A.Blank)},children:"Set"}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct(A.Blank)},children:"Clear"}),(0,e.jsx)(Be.Z,{style:{fontSize:"24px",color:ie.Blank}}),(0,e.jsx)("b",{children:we.length})," Blank QC"]}),(0,e.jsx)(K.Z,{danger:!0,onClick:function(){return ct()},children:"Clear All QC Position"})]})})})]})})},{title:"Randomization",content:(0,e.jsx)(Sr,{plateType:wt,maxSamplesOnSinglePlate:qe,plateNumber:et,dimRes:[f,ae,$e],customQcPosition:De,blankQcPosition:we,pooledQcPosition:Re,solventQcPosition:Me,ltrQcPosition:Te,direction:Mt,sampleData:bn,setSetMap:Sn})},{title:"WorkSheet",content:(0,e.jsx)(yr,{setMap:gn})}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(oe.Z,{size:"small",actions:[(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(K.Z,{onClick:function(){return x(c-1)},disabled:c===0,children:"Prev"},"Prev"),c<3?(0,e.jsx)(K.Z,{type:"primary",onClick:function(){return x(c+1)},disabled:w!==void 0,children:"Next"},"Next"):(0,e.jsx)(K.Z,{type:"primary",children:"Finish and Save"})]})],children:[(0,e.jsx)(zn.Z,{type:"navigation",size:"small",labelPlacement:"vertical",current:c,onChange:Ir,className:"site-navigation-steps",children:oa.map(function(P){return(0,e.jsx)(Cr,{title:P.title},P.title)})}),(0,e.jsx)("div",{className:"steps-content",children:(t=oa[c])===null||t===void 0?void 0:t.content})]}),(0,e.jsx)(Aa,{addCoverStrDesc:"".concat(ne.formatMessage({id:"sample.overwrite.warning"})+","+ne.formatMessage({id:"confirm.overwrite"})),newAddStrDesc:"".concat(ne.formatMessage({id:"upload.sample.file.tip.1"})),outVoStr:"",draggerStr:"".concat(ne.formatMessage({id:"download.to.fill.tip"})),id:o,coverStr:"".concat(ne.formatMessage({id:"overwrite.current.sample"})),newAddStr:"".concat(ne.formatMessage({id:"create.sample"})),title:"".concat(ne.formatMessage({id:"import.sample.by.excel"})),visible:ve,setVisible:Ce,standardFileUrl:"".concat(Kt.H,"/static/SampleTemplate.xlsx"),actionUrl:"".concat(Kt.H,"/sample/check/excel"),uploadHandle:function(){var P=X()(C()().mark(function j(M,H){var T,Ae;return C()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,a.uploadExcel({projectId:o,addMode:M,file:H});case 2:if(T=Ze.sent,!T.success){Ze.next=9;break}return T.data.length?Wn.Z.warning({title:"".concat(ne.formatMessage({id:"samples.not.imported.successful.exist"})),content:(0,e.jsxs)(e.Fragment,{children:["`$",ne.formatMessage({id:"samples.not.imported.successful"}),"`.."]})}):(ee.ZP.success("".concat(ne.formatMessage({id:"upload.success"}))),r(T.featureMap.projectId)),m==null||(Ae=m.current)===null||Ae===void 0||Ae.reload(),Ze.abrupt("return",!0);case 9:return T.data.length&&T.data instanceof Array&&Wn.Z.warning({title:"".concat(ne.formatMessage({id:"samples.not.imported.successful.exist"})),content:(0,e.jsxs)(e.Fragment,{children:["`$",ne.formatMessage({id:"samples.not.imported.successful"}),"`.."]})}),Ze.abrupt("return",!1);case 11:case"end":return Ze.stop()}},j)}));return function(j,M){return P.apply(this,arguments)}}()})]})},Pr=kr},78809:function(Mn,nt,u){u.d(nt,{b:function(){return V}});var mt=u(15009),C=u.n(mt),vt=u(97857),B=u.n(vt),ht=u(99289),X=u.n(ht),pt=u(12444),v=u.n(pt),gt=u(72004),ce=u.n(gt),me=u(10328),V=function(){function s(){v()(this,s)}return ce()(s,[{key:"list",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/list"),{method:"GET",params:B()({},e)}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"all",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/all"),{method:"GET",params:B()({},e)}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"add",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/add"),{method:"post",params:e}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"update",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/update"),{method:"POST",params:e}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"remove",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/remove"),{method:"GET",params:{ids:e}}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"delete",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/delete"),{method:"GET",params:{id:e}}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"batchAdd",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/batchAdd"),{method:"POST",params:B()({},e)}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"batchUpdate",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/batchUpdate"),{method:"POST",params:e}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"batchRemove",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/batchRemove"),{method:"GET",params:B()({},e)}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"export",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/export"),{method:"GET",params:{id:e}}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()},{key:"import",value:function(){var G=X()(C()().mark(function L(e){return C()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,me.request)("".concat("http://47.242.18.69:80","/").concat(this.getDomain(),"/import"),{method:"GET",params:B()({},e)}));case 1:case"end":return g.stop()}},L,this)}));function E(L){return G.apply(this,arguments)}return E}()}]),s}()},67115:function(Mn,nt,u){u.d(nt,{Z:function(){return ce}});var mt=u(12444),C=u.n(mt),vt=u(72004),B=u.n(vt),ht=u(31996),X=u.n(ht),pt=u(26037),v=u.n(pt),gt=u(78809),ce=function(me){X()(s,me);var V=v()(s);function s(){return C()(this,s),V.apply(this,arguments)}return B()(s,[{key:"getDomain",value:function(){return"project"}},{key:"beforeAdd",value:function(){}}]),s}(gt.b)}}]);
